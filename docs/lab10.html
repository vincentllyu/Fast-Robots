<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ECE5960 Fast Robots</title>

    <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">
    <style>
        
        .sidebar{
            width: 250px!important;
        }
        pre code {
            background-color: #eee;
            border: 1px solid #999;
            display: block;
            padding: 5px;
            text-align: l;
        }
    </style>

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="sidebar-brand-text mx-3">Fast Robots</sup></div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="fab fa-accessible-icon"></i>
                    <span>About Me</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider">


            <!-- Nav Item - Pages Collapse Menu -->
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                    aria-expanded="true" aria-controls="collapseTwo">
                    <i class="fas fa-biohazard"></i>
                    <span>Labs</span>
                </a>
                <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <a class="collapse-item" href="lab1.html">Lab1: The Artemis board</a>
                        <a class="collapse-item" href="lab2.html">Lab2: Bluetooth Communication</a>
                        <a class="collapse-item" href="lab3.html">Lab3: TOF and IMU</a>
                        <a class="collapse-item" href="lab4.html">Lab4: Characterize your car</a>
                        <a class="collapse-item" href="lab5.html">Lab5: Open Loop Control</a>
                        <a class="collapse-item" href="lab6.html">Lab6: Closed-loop control (PID)</a>
                        <a class="collapse-item" href="lab7.html">Lab7: Kalman Filters</a>
                        <a class="collapse-item" href="lab8.html">Lab8: Stunts</a>
                        <a class="collapse-item" href="lab9.html">Lab9: Mapping (real)</a>
                        <a class="collapse-item" href="lab10.html">Lab10: Simulator</a>
                        <a class="collapse-item" href="lab11.html">Lab11</a>
                        <a class="collapse-item" href="lab12.html">Lab12</a>
                    </div>
                </div>
            </li>


        </ul>
        <!-- End of Sidebar -->
        <div class="about pics" style="margin-left: 100px;margin-top: 30px;">
            <p style="width:630px;font-size: 20px;margin-left: 20px;">
                <b style="font-size: 26px;">Lab 10 Report</b><br>
                For this lab, I followed the guide and implemented an open loop control to go in a square trajectory,
                and a closed loop control for object avoidence.<br>
            </p>

            <p style="width:630px;font-size: 20px;margin-left: 20px;">
                <b style="font-size: 20px;">Set up</b><br>
                besided following the hand out, I encountered an error when installing PyQt5. I'm using an M1 Macbook. 
                I found a workaround by installing PyQt6 instead of PyQt5. Just one line of code change fixed it.
                Though, I don't know how the simulation works from a low level perspective.<br>
            </p>

            <p style="width:630px;font-size: 20px;margin-left: 20px;">
                <b style="font-size: 20px;">Task 1 Description of the simulator</b><br>
                The simulator simulates a robot dynamics. We can control it through changing its velocity and
                angular velocity, though I think the collision hasn't been implemented, the velocity goes quite werid
                when colliding with the wall. Another feature is sensor readings, the robot has a TOF reading right in 
                front of it, in the middle of the front bumper. And it has a ground truth reading that is its absolute position
                and orientation reading, and a odometer reading, that is it relative position and orientation readings.<br><br>

                And for another function, we have a plotter, it is used to plot above sensor readings and robot position and 
                orientation in real time.<br><br>
                For a control and readings functionality, see Fig.1 where I screenshot from the jupyter note book guide.<br>
                <img src="Labs/lab10/functionD.png" alt="drawing" width="630"/><br>
                <span style="margin-left:200px">Fig.1 Simulation commands</span><br>
            </p>

            <p style="width:630px;font-size: 20px;margin-left: 20px;">
                <b style="font-size: 20px;">Task 2 Open loop square</b><br>
                Here I implemented a open loop controller. The logic is set a velocity, then let timer run for a certain amount of
                time so we can get constant translation. See Fig.2 for the code. Here I wrote two cuntions, one for setting how 
                far I want the robot to go, and another for setting how much I want the robot to rotate. The first parameter is
                distance in meter/rotation in degree, second parameter is time I want it to take to complete the translation/rotation.
                And for the square I just put it in a loop to go straight then left.<br>
                <img src="Labs/lab10/squareCode.png" alt="drawing" width="630"/><br>
                <span style="margin-left:200px">Fig.2 Square Trajectory Code</span><br>

                <iframe width="560" height="315" src="https://www.youtube.com/embed/xNutkFdWhK4?start=63" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br>
                From above video, and from the ground truth coordinates (green), you can see that the robot doesn't follow the square exacty,
                I think it's because the step of each robot state, it can get in a half state at one step.
                And the odometer readings (red) is chaotic, that's is due to robot's sensor reading is cumulated and I think the random
                noise generated in the robot model is quite large thus it isn't accurate at all.<br><br>
                In the video, I execute the robot to go 0.5 meter in 1 second. So the velocity is 0.5 m/s.
                And for the turn, I execute the robot to turn 90 degrees in 1 second, so the angular velocity is 1.57 rad/s.
            </p>

            <p style="width:630px;font-size: 20px;margin-left: 20px;">
                <b style="font-size: 20px;">Task 3 Closed loop object avoidence</b><br>
                Here I implemented a closed loop control, the logic is the robot always go forward unless the TOF
                readings is smaller than 0.3 meters, else, it turns left 10 degree increment until the TOF reading is
                larger than 1 meter, and it keeps going forward again. Code shown in Fig.3.

                <img src="Labs/lab10/objectAvoid.png" alt="drawing" width="630"/><br>
                <span style="margin-left:200px">Fig.3 Object Avoidence Code</span><br>

                <iframe width="560" height="315" src="https://www.youtube.com/embed/vi0WXrzELcc?start=12" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br>

                <br> I think the speed isn't the only factor to concider here, collision distance also need to be factored in,
                Now I set the robot to go 0.5 m/s, and with a collision distance of 0.3 meters, set it this long isn't just for 
                it to stop in time, but also taking account to the robot's body size. It can't detect object that's close to its side,
                like in the video shows at 0:17. <br>

                I think a good solution is to have two sensors to detect if each side is about to collide,
                or we can implement an wiggle trajectory, which takes much more time for the robot to get 
                to where it needs to be. So for the robot to turn left and right slightly while going straight.
            </p>     
    </div>
    <!-- End of Page Wrapper -->




    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>


</body>

</html>